{"remainingRequest":"C:\\Users\\陆小主\\Desktop\\dlkcw\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\陆小主\\Desktop\\dlkcw\\src\\views\\dlkcw\\abnormal.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\陆小主\\Desktop\\dlkcw\\src\\views\\dlkcw\\abnormal.vue","mtime":1741570207233},{"path":"C:\\Users\\陆小主\\Desktop\\dlkcw\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1741571479562},{"path":"C:\\Users\\陆小主\\Desktop\\dlkcw\\node_modules\\babel-loader\\lib\\index.js","mtime":1741571480837},{"path":"C:\\Users\\陆小主\\Desktop\\dlkcw\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1741571479562},{"path":"C:\\Users\\陆小主\\Desktop\\dlkcw\\node_modules\\vue-loader\\lib\\index.js","mtime":1741571481108}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGdldEFsbEFibm9ybWFsTGlzdCwgZ2V0VG93bkxpc3QsIGV4cG9ydERhdGEgfSBmcm9tICdAL2FwaS9kbGtjdy9pbmRleCc7CmltcG9ydCBQaW55aW5NYXRjaCBmcm9tICdwaW55aW4tbWF0Y2gnOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGFibm9ybWFsTGlzdDogW10sCiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICBhYm5vcm1hbFBhcmFtczogewogICAgICAgIHBhZ2VOdW06IDEsCiAgICAgICAgcGFnZVNpemU6IDEwLAogICAgICAgIHRvdGFsOiAwLAogICAgICAgIHNpdGVOYW1lOiB1bmRlZmluZWQsCiAgICAgICAgYWJub3JtYWxUeXBlOiB1bmRlZmluZWQsCiAgICAgICAgdG93bjogdW5kZWZpbmVkLAogICAgICAgIGxpc3Q6IFtdLAogICAgICAgIGRhdGE6IHJlcXVpcmUoIkAvc3RhdGljL2pzb24vYWJub3JtYWwuanNvbiIpCiAgICAgIH0sCiAgICAgIGFibm9ybWFsT3B0aW9uczpbewogICAgICAgIGRpY3RMYWJlbDon5pyJ5aSE55CG6YeP5L2G5L2O77yI6Zu277yJ55So55S16YePJyxkaWN0VmFsdWU6JzEnLHJlYXNvbjon546w5Zy65aSE55CG6K6+5aSH5pyq5ZCv5Yqo5oiW5pyq5a6M5YWo5ZCv5Yqo44CB5rWB6YeP6YeH6ZuG5pyJ6Zeu6aKY44CB5o+Q5L6b55qE5oi35Y+35pWw5o2u5pyJ6K+v44CB6LSf6I235pyq57uP6L+H55S16IO96KGoJwogICAgICB9LHsKICAgICAgICBkaWN0TGFiZWw6J+acieWkhOeQhumHj+S9humrmOeUqOeUtemHjycsZGljdFZhbHVlOicyJyxyZWFzb246J+eOsOWcuuWkhOeQhuiuvuWkh+W8guW4uOWQr+WKqOOAgeWklumDqOaWveW3peWAn+eUtScKICAgICAgfSx7CiAgICAgICAgZGljdExhYmVsOifpq5jlpITnkIbph4/kvYbkvY7nlKjnlLXph48nLGRpY3RWYWx1ZTonMycscmVhc29uOifnjrDlnLrlpITnkIborr7lpIfmnKrlkK/liqjmiJbmnKrlrozlhajlkK/liqjjgIHmtYHph4/ph4fpm4bmnInpl67popjjgIHotJ/ojbfmnKrnu4/ov4fnlLXog73ooagnCiAgICAgIH0sewogICAgICAgIGRpY3RMYWJlbDon5aSE55CG6YeP57G75Ly85L2G55So55S16YeP5Y+Y5YyW5aSnJyxkaWN0VmFsdWU6JzQnLHJlYXNvbjon546w5Zy65aSE55CG6K6+5aSH5pyq5oyJ54Wn5rWB6YeP6ZyA5rGC6L+b6KGM5ZCv5Yqo44CB6Ieq5Yqo5YyW5o6n5Yi2562W55Wl6L+H5LqO5r+A6L+bJwogICAgICB9LHsKICAgICAgICBkaWN0TGFiZWw6J+WkhOeQhumHj+WHj+WwkeS9hueUqOeUtemHj+WinuWKoCcsZGljdFZhbHVlOic1JyxyZWFzb246J+eOsOWcuuWkhOeQhuiuvuWkh+acquaMieeFp+a1gemHj+mcgOaxgui/m+ihjOWQr+WKqOOAgeiHquWKqOWMluaOp+WItuetlueVpei/h+S6jua/gOi/mycKICAgICAgfSx7CiAgICAgICAgZGljdExhYmVsOiflpITnkIbph4/lop7liqDkvYbnlKjnlLXph4/lh4/lsJEnLGRpY3RWYWx1ZTonNicscmVhc29uOifnjrDlnLrlpITnkIborr7lpIfmnKrmjInnhafmtYHph4/pnIDmsYLov5vooYzlkK/liqjjgIHoh6rliqjljJbmjqfliLbnrZbnlaXov4fkuo7mv4Dov5snCiAgICAgIH0sewogICAgICAgIGRpY3RMYWJlbDon5aSE55CG6YeP5ruh6LSf6I235oiW6LaFOTAlJyxkaWN0VmFsdWU6JzcnLHJlYXNvbjon6ZyA6L+b6KGM5omp5a655pS56YCgJwogICAgICB9XSwKICAgICAgdG93bkRhdGE6IHJlcXVpcmUoIkAvc3RhdGljL2pzb24vdG93bkRhdGEuanNvbiIpLAogICAgICB0b3duT3B0aW9uczpbXSwKICAgICAgaW5pdFRvd25PcHRpb25zOiBbXSwKICAgICAgcmVhc29uOiAnJwogICAgfTsKICB9LAogIGNyZWF0ZWQoKSB7CiAgCiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy5hYm5vcm1hbFBhcmFtcy50b3duID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3NpdGVOYW1lJyk7CiAgICB0aGlzLmdldEFibm9ybWFsTGlzdCgpOwogICAgdGhpcy5nZXRUb3duTGlzdCgpOwogIH0sCiAgbWV0aG9kczogewogICAgZ2V0VG93bkxpc3QoKXsKICAgICAgaWYodGhpcy5qdXN0SXNTdGF0aWMoKSl7CiAgICAgICAgdGhpcy50b3duT3B0aW9ucyA9IHRoaXMudG93bkRhdGEubWFwKGl0ZW09PnsKICAgICAgICAgIGxldCBqc29uID0ge3Rvd246IGl0ZW0udG93bn0KICAgICAgICAgIHJldHVybiBqc29uOwogICAgICAgIH0pOwogICAgICAgIHRoaXMuaW5pdFRvd25PcHRpb25zID0gT2JqZWN0LmFzc2lnbih0aGlzLnRvd25PcHRpb25zLHt9KTsKICAgICAgfWVsc2V7CiAgICAgICAgZ2V0VG93bkxpc3QoKS50aGVuKChyZXMpID0+IHsKICAgICAgICAgIHRoaXMudG93bk9wdGlvbnMgPSByZXMuZGF0YTsKICAgICAgICAgIHRoaXMuaW5pdFRvd25PcHRpb25zID0gT2JqZWN0LmFzc2lnbih0aGlzLnRvd25PcHRpb25zLHt9KTsKICAgICAgICB9KQogICAgICB9CiAgICB9LAogICAganVzdElzU3RhdGljKCl7CiAgICAgIHJldHVybiBKU09OLnBhcnNlKHByb2Nlc3MuZW52LlZVRV9BUFBfSVNfU1RBVElDKTsKICAgIH0sCiAgICBnZXRBYm5vcm1hbExpc3QoKXsKICAgICAgbGV0IHBhZ2VOdW0gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncGFnZU51bScpOwogICAgICBwYWdlTnVtID0gcGFnZU51bSA/IHBhcnNlSW50KHBhZ2VOdW0pIDogMTsKICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3BhZ2VOdW0nLCcnKTsKICAgICAgaWYodGhpcy5qdXN0SXNTdGF0aWMoKSl7CiAgICAgICAgdGhpcy5oYW5kbGVRdWVyeShwYWdlTnVtKTsKICAgICAgfWVsc2V7CiAgICAgICAgZ2V0QWxsQWJub3JtYWxMaXN0KCkudGhlbigocmVzKSA9PiB7CiAgICAgICAgICB0aGlzLmFibm9ybWFsUGFyYW1zLmRhdGEgPSByZXMuZGF0YTsKICAgICAgICAgIHRoaXMuaGFuZGxlUXVlcnkocGFnZU51bSk7CiAgICAgICAgfSkKICAgICAgfQogICAgfSwKICAgIHBhZ2VDaGFuZ2UocGFnZSwga2V5KSB7CiAgICAgIGNvbnN0IHBhZ2VOdW0gPSBwYWdlLnBhZ2U7CiAgICAgIHRoaXMuZGVhbERhdGEocGFnZU51bSwga2V5KTsKICAgIH0sCiAgICBkZWFsRGF0YShwYWdlTnVtLCBrZXkpIHsKICAgICAgY29uc3QgZGF0YSA9IHRoaXNba2V5ICsgIlBhcmFtcyJdLmxpc3Q7CiAgICAgIGNvbnN0IHBhZ2VTaXplID0gdGhpc1trZXkgKyAiUGFyYW1zIl0ucGFnZVNpemU7CiAgICAgIHRoaXNba2V5ICsgIkxpc3QiXSA9IGRhdGEuc2xpY2UoKHBhZ2VOdW0gLSAxKSAqIHBhZ2VTaXplLCBwYWdlTnVtICogcGFnZVNpemUpOwogICAgfSwKICAgIGNoYW5nVG93bigpewogICAgICB0aGlzLnRvd25PcHRpb25zID0gdGhpcy5pbml0VG93bk9wdGlvbnM7CiAgICB9LAogICAgaGFuZGxlRmlsdGVyKHZhbCkgewogICAgICAvLyDlr7nnu5HlrprmlbDmja7otYvlgLwKICAgICAgaWYgKHZhbCkgewogICAgICAgIHRoaXMudG93bk9wdGlvbnMgPSB0aGlzLmluaXRUb3duT3B0aW9ucy5maWx0ZXIoKGl0ZW0pID0+IHsKICAgICAgICAgIC8vIOWmguaenOebtOaOpeWMheWQq+i+k+WFpeWAvOebtOaOpei/lOWbnnRydWUKICAgICAgICAgIGlmIChpdGVtLnRvd24pIHsKICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgIGl0ZW0udG93bi50b1VwcGVyQ2FzZSgpLmluZGV4T2YodmFsLnRvVXBwZXJDYXNlKCkpICE9IC0xCiAgICAgICAgICAgICkgewogICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIOi+k+WFpeWAvOaLvOmfs2QKICAgICAgICAgICAgcmV0dXJuIFBpbnlpbk1hdGNoLm1hdGNoKGl0ZW0udG93biwgdmFsKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnRvd25PcHRpb25zID0gdGhpcy5pbml0VG93bk9wdGlvbnM7CiAgICAgIH0KICAgIH0sCiAgICBhYm5vcm1hbFR5cGVGb3JtYXQocm93KXsKICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0RGljdExhYmVsKHRoaXMuYWJub3JtYWxPcHRpb25zLHJvdy5hYm5vcm1hbFR5cGUpOwogICAgfSwKICAgIC8qKiDmkJzntKLmjInpkq7mk43kvZwgKi8KICAgIGhhbmRsZVF1ZXJ5KHBhZ2VOdW0pIHsKICAgICAgdGhpcy5hYm5vcm1hbFBhcmFtcy5wYWdlTnVtID0gcGFnZU51bSA/IHBhZ2VOdW0gOiAxOwogICAgICBsZXQgbGlzdCA9IHRoaXMuYWJub3JtYWxQYXJhbXMuZGF0YS5maWx0ZXIoaXRlbT0+ewogICAgICAgICAgaWYoIXRoaXMuYWJub3JtYWxQYXJhbXMuc2l0ZU5hbWUpewogICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGl0ZW0uc2l0ZU5hbWUuaW5kZXhPZih0aGlzLmFibm9ybWFsUGFyYW1zLnNpdGVOYW1lKSA+IC0xIHx8IFBpbnlpbk1hdGNoLm1hdGNoKGl0ZW0uc2l0ZU5hbWUsIHRoaXMuYWJub3JtYWxQYXJhbXMuc2l0ZU5hbWUpOwogICAgICB9KQogICAgICBsaXN0ID0gbGlzdC5maWx0ZXIoaXRlbT0+ewogICAgICAgICAgaWYoIXRoaXMuYWJub3JtYWxQYXJhbXMudG93bil7CiAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gaXRlbS5zaXRlTmFtZS5pbmRleE9mKHRoaXMuYWJub3JtYWxQYXJhbXMudG93bikgPiAtMQogICAgICB9KQogICAgICB0aGlzLmFibm9ybWFsUGFyYW1zLmxpc3QgPSBsaXN0LmZpbHRlcihpdGVtPT57CiAgICAgICAgICBpZighdGhpcy5hYm5vcm1hbFBhcmFtcy5hYm5vcm1hbFR5cGUpewogICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGl0ZW0uYWJub3JtYWxUeXBlID09PSB0aGlzLmFibm9ybWFsUGFyYW1zLmFibm9ybWFsVHlwZTsKICAgICAgfSkKICAgICAgdGhpcy5hYm5vcm1hbFBhcmFtcy50b3RhbCA9IHRoaXMuYWJub3JtYWxQYXJhbXMubGlzdC5sZW5ndGg7CiAgICAgIHRoaXMuZGVhbERhdGEocGFnZU51bSwnYWJub3JtYWwnKTsKICAgIH0sCiAgICAvKiog6YeN572u5oyJ6ZKu5pON5L2cICovCiAgICByZXNldFF1ZXJ5KCkgewogICAgICB0aGlzLmRhdGVSYW5nZSA9IFtdOwogICAgICB0aGlzLnJlc2V0Rm9ybSgicXVlcnlGb3JtIik7CiAgICAgIHRoaXMuaGFuZGxlUXVlcnkoKTsKICAgIH0sCiAgICBiYWNrKCl7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHtuYW1lOiAiSW5kZXgiLHBhcmFtczogeyBiYWNrOiB0cnVlIH19KTsKICAgIH0sCiAgICBjaGFuZ2VBYm5vcm1hbFR5cGUoKXsKICAgICAgaWYodGhpcy5hYm5vcm1hbFBhcmFtcy5hYm5vcm1hbFR5cGUpewogICAgICAgIGxldCBsaXN0ID0gdGhpcy5hYm5vcm1hbE9wdGlvbnMuZmlsdGVyKGl0ZW09PiBpdGVtLmRpY3RWYWx1ZSA9PT0gdGhpcy5hYm5vcm1hbFBhcmFtcy5hYm5vcm1hbFR5cGUpCiAgICAgICAgdGhpcy5yZWFzb24gPSBsaXN0WzBdLnJlYXNvbjsKICAgICAgfWVsc2V7CiAgICAgICAgdGhpcy5yZWFzb24gPSAnJwogICAgICB9CiAgICB9LAogICAgZ290b1hxKHJvdyl7CiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdjdXN0Tm8nLCByb3cuY3VzdE5vKTsKICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3BhZ2VOdW0nLCB0aGlzLmFibm9ybWFsUGFyYW1zLnBhZ2VOdW0pOwogICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYWJub3JtYWwnLCB0cnVlKTsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goe3BhdGg6ICIvZGxrY3cveHEiLHF1ZXJ5OiB7IGN1c3RObzogcm93LmN1c3RObyB9fSk7CiAgICB9LAogICAgZXhwb3J0VG9FeGNlbCgpIHsKICAgICAgY29uc3QgaGVhZGVycyA9IFsn56uZ54K55ZCN56ewJywgJ+W8guW4uOexu+WeiycsICfmlbDmja7ojIPlm7QnLCAn5byC5bi46K+05piOJ10KICAgICAgY29uc3QgZGF0YSA9IHRoaXMuYWJub3JtYWxQYXJhbXMubGlzdC5tYXAoaXRlbSA9PiBbaXRlbS5zaXRlTmFtZSwgdGhpcy5hYm5vcm1hbFR5cGVGb3JtYXQoaXRlbSksIGl0ZW0uZGF0YVJhbmdlLGl0ZW0ubXNnXSkKICAgICAgZXhwb3J0RGF0YShoZWFkZXJzLGRhdGEsJ+W8guW4uOaVsOaNruWIl+ihqCcsJ+W8guW4uOaVsOaNricpOwogICAgfQogIH0sCn07Cg=="},{"version":3,"sources":["abnormal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"abnormal.vue","sourceRoot":"src/views/dlkcw","sourcesContent":["<template>\r\n    <div class=\"main\">\r\n      <el-row>\r\n        <el-col :span=\"24\">\r\n          <div class=\"back\" @click=\"back\">返回</div>\r\n        </el-col>\r\n        <el-col :span=\"24\">\r\n          <div class=\"cc4\">\r\n            <div class=\"title4\">异常数据分析列表</div>\r\n            <el-form :model=\"abnormalParams\" ref=\"queryForm\" :inline=\"true\" label-width=\"88px\">\r\n                <el-form-item label=\"镇\" prop=\"town\">\r\n                    <el-select\r\n                    v-model=\"abnormalParams.town\"\r\n                    placeholder=\"全部\"\r\n                    clearable\r\n                    filterable\r\n                    :filter-method=\"handleFilter\"\r\n                    size=\"small\"\r\n                    style=\"width: 180px\"\r\n                    @change=\"changTown\"\r\n                    >\r\n                    <el-option\r\n                        v-for=\"dict in townOptions\"\r\n                        :key=\"dict.town\"\r\n                        :label=\"dict.town\"\r\n                        :value=\"dict.town\"\r\n                    />\r\n                    </el-select>\r\n                </el-form-item>\r\n                <el-form-item label=\"站点名称\" prop=\"siteName\">\r\n                    <el-input\r\n                    v-model=\"abnormalParams.siteName\"\r\n                    placeholder=\"请输入站点名称\"\r\n                    clearable\r\n                    size=\"small\"\r\n                    style=\"width: 240px\"\r\n                    @keyup.enter.native=\"handleQuery\"\r\n                    />\r\n                </el-form-item>\r\n            \r\n                <el-form-item label=\"异常类型\" prop=\"abnormalType\">\r\n                    <el-select\r\n                    v-model=\"abnormalParams.abnormalType\"\r\n                    placeholder=\"全部\"\r\n                    clearable\r\n                    size=\"small\"\r\n                    style=\"width: 240px\"\r\n                    @change=\"changeAbnormalType\"\r\n                    >\r\n                    <el-option\r\n                        v-for=\"dict in abnormalOptions\"\r\n                        :key=\"dict.dictValue\"\r\n                        :label=\"dict.dictLabel\"\r\n                        :value=\"dict.dictValue\"\r\n                    />\r\n                    </el-select>\r\n                </el-form-item>\r\n                <el-form-item>\r\n                    <el-button type=\"primary\" icon=\"el-icon-search\" size=\"mini\" @click=\"handleQuery(1)\">搜索</el-button>\r\n                    <el-button icon=\"el-icon-refresh\" size=\"mini\" @click=\"resetQuery\">重置</el-button>\r\n                    <el-button type=\"warning\" icon=\"el-icon-download\" size=\"mini\" @click=\"exportToExcel\">导出</el-button>\r\n                </el-form-item>\r\n            </el-form>\r\n            <div v-if=\"reason\" class=\"reason\">\r\n              <!-- <span class=\"suggest\">{{ abnormalParams.abnormalType === '7' ? '建议:':'异常原因分析:'}}</span> -->\r\n              <span class=\"suggest\">异常原因分析:</span>\r\n              {{ abnormalParams.abnormalType === '7'?'':'可能与'}}\r\n              <span class=\"reason-content\">{{ reason }}</span>\r\n              {{ abnormalParams.abnormalType === '7'?'':'等有关'}}\r\n            </div>\r\n            <el-table\r\n              :data=\"abnormalList\"\r\n              style=\"width: 100%\"\r\n              :header-cell-style=\"{\r\n                padding: '12px',\r\n                background: 'none',\r\n                color: '#fff',\r\n                fontWeight: '600',\r\n                fontSize: '16px',\r\n              }\"\r\n              v-loading=\"loading\"\r\n              element-loading-text=\"拼命加载中\"\r\n              element-loading-spinner=\"el-icon-loading\"\r\n              element-loading-background=\"rgba(0, 0, 0, 0.8)\"\r\n            >\r\n              <el-table-column\r\n                prop=\"siteName\"\r\n                label=\"站点名称\"\r\n                align=\"center\"\r\n                width=\"300\"\r\n                show-overflow-tooltip\r\n              >\r\n                <template slot-scope=\"scope\">\r\n                  <span @click=\"gotoXq(scope.row)\" style=\"cursor: pointer;\">{{scope.row.siteName}}</span>\r\n                </template>\r\n              </el-table-column>\r\n              <el-table-column\r\n                prop=\"abnormalType\"\r\n                label=\"异常类型\"\r\n                align=\"center\"\r\n                width=\"300\"\r\n                :formatter=\"abnormalTypeFormat\"\r\n                show-overflow-tooltip\r\n              >\r\n              </el-table-column>\r\n              <el-table-column\r\n                prop=\"dataRange\"\r\n                label=\"数据范围\"\r\n                align=\"center\"\r\n                width=\"200\"\r\n                show-overflow-tooltip\r\n              >\r\n              </el-table-column>\r\n              <!-- <el-table-column\r\n                prop=\"dealNum\"\r\n                label=\"处理量\"\r\n                align=\"center\"\r\n                width=\"200\"\r\n                show-overflow-tooltip\r\n              >\r\n              </el-table-column>\r\n              <el-table-column\r\n                prop=\"totalNum\"\r\n                label=\"用电量\"\r\n                align=\"center\"\r\n                width=\"200\"\r\n                show-overflow-tooltip\r\n              >\r\n              </el-table-column> -->\r\n              <el-table-column\r\n                prop=\"msg\"\r\n                label=\"异常说明\"\r\n                align=\"center\"\r\n                show-overflow-tooltip\r\n              >\r\n              </el-table-column>\r\n            </el-table>\r\n            <pagination\r\n              v-show=\"abnormalParams.total > 0\"\r\n              :total=\"abnormalParams.total\"\r\n              :page.sync=\"abnormalParams.pageNum\"\r\n              :limit.sync=\"abnormalParams.pageSize\"\r\n              @pagination=\"(page) => {pageChange(page,'abnormal');}\"\r\n            />\r\n          </div>\r\n        </el-col>\r\n      </el-row>\r\n    </div>\r\n  </template>\r\n  <script>\r\n  import { getAllAbnormalList, getTownList, exportData } from '@/api/dlkcw/index';\r\n  import PinyinMatch from 'pinyin-match';\r\n  export default {\r\n    data() {\r\n      return {\r\n        abnormalList: [],\r\n        loading: false,\r\n        abnormalParams: {\r\n          pageNum: 1,\r\n          pageSize: 10,\r\n          total: 0,\r\n          siteName: undefined,\r\n          abnormalType: undefined,\r\n          town: undefined,\r\n          list: [],\r\n          data: require(\"@/static/json/abnormal.json\")\r\n        },\r\n        abnormalOptions:[{\r\n          dictLabel:'有处理量但低（零）用电量',dictValue:'1',reason:'现场处理设备未启动或未完全启动、流量采集有问题、提供的户号数据有误、负荷未经过电能表'\r\n        },{\r\n          dictLabel:'有处理量但高用电量',dictValue:'2',reason:'现场处理设备异常启动、外部施工借电'\r\n        },{\r\n          dictLabel:'高处理量但低用电量',dictValue:'3',reason:'现场处理设备未启动或未完全启动、流量采集有问题、负荷未经过电能表'\r\n        },{\r\n          dictLabel:'处理量类似但用电量变化大',dictValue:'4',reason:'现场处理设备未按照流量需求进行启动、自动化控制策略过于激进'\r\n        },{\r\n          dictLabel:'处理量减少但用电量增加',dictValue:'5',reason:'现场处理设备未按照流量需求进行启动、自动化控制策略过于激进'\r\n        },{\r\n          dictLabel:'处理量增加但用电量减少',dictValue:'6',reason:'现场处理设备未按照流量需求进行启动、自动化控制策略过于激进'\r\n        },{\r\n          dictLabel:'处理量满负荷或超90%',dictValue:'7',reason:'需进行扩容改造'\r\n        }],\r\n        townData: require(\"@/static/json/townData.json\"),\r\n        townOptions:[],\r\n        initTownOptions: [],\r\n        reason: ''\r\n      };\r\n    },\r\n    created() {\r\n    \r\n    },\r\n    mounted() {\r\n      this.abnormalParams.town = localStorage.getItem('siteName');\r\n      this.getAbnormalList();\r\n      this.getTownList();\r\n    },\r\n    methods: {\r\n      getTownList(){\r\n        if(this.justIsStatic()){\r\n          this.townOptions = this.townData.map(item=>{\r\n            let json = {town: item.town}\r\n            return json;\r\n          });\r\n          this.initTownOptions = Object.assign(this.townOptions,{});\r\n        }else{\r\n          getTownList().then((res) => {\r\n            this.townOptions = res.data;\r\n            this.initTownOptions = Object.assign(this.townOptions,{});\r\n          })\r\n        }\r\n      },\r\n      justIsStatic(){\r\n        return JSON.parse(process.env.VUE_APP_IS_STATIC);\r\n      },\r\n      getAbnormalList(){\r\n        let pageNum = localStorage.getItem('pageNum');\r\n        pageNum = pageNum ? parseInt(pageNum) : 1;\r\n        localStorage.setItem('pageNum','');\r\n        if(this.justIsStatic()){\r\n          this.handleQuery(pageNum);\r\n        }else{\r\n          getAllAbnormalList().then((res) => {\r\n            this.abnormalParams.data = res.data;\r\n            this.handleQuery(pageNum);\r\n          })\r\n        }\r\n      },\r\n      pageChange(page, key) {\r\n        const pageNum = page.page;\r\n        this.dealData(pageNum, key);\r\n      },\r\n      dealData(pageNum, key) {\r\n        const data = this[key + \"Params\"].list;\r\n        const pageSize = this[key + \"Params\"].pageSize;\r\n        this[key + \"List\"] = data.slice((pageNum - 1) * pageSize, pageNum * pageSize);\r\n      },\r\n      changTown(){\r\n        this.townOptions = this.initTownOptions;\r\n      },\r\n      handleFilter(val) {\r\n        // 对绑定数据赋值\r\n        if (val) {\r\n          this.townOptions = this.initTownOptions.filter((item) => {\r\n            // 如果直接包含输入值直接返回true\r\n            if (item.town) {\r\n              if (\r\n                item.town.toUpperCase().indexOf(val.toUpperCase()) != -1\r\n              ) {\r\n                return true;\r\n              }\r\n              // 输入值拼音d\r\n              return PinyinMatch.match(item.town, val);\r\n            }\r\n          });\r\n        } else {\r\n          this.townOptions = this.initTownOptions;\r\n        }\r\n      },\r\n      abnormalTypeFormat(row){\r\n        return this.selectDictLabel(this.abnormalOptions,row.abnormalType);\r\n      },\r\n      /** 搜索按钮操作 */\r\n      handleQuery(pageNum) {\r\n        this.abnormalParams.pageNum = pageNum ? pageNum : 1;\r\n        let list = this.abnormalParams.data.filter(item=>{\r\n            if(!this.abnormalParams.siteName){\r\n                return true;\r\n            }\r\n            return item.siteName.indexOf(this.abnormalParams.siteName) > -1 || PinyinMatch.match(item.siteName, this.abnormalParams.siteName);\r\n        })\r\n        list = list.filter(item=>{\r\n            if(!this.abnormalParams.town){\r\n                return true;\r\n            }\r\n            return item.siteName.indexOf(this.abnormalParams.town) > -1\r\n        })\r\n        this.abnormalParams.list = list.filter(item=>{\r\n            if(!this.abnormalParams.abnormalType){\r\n                return true;\r\n            }\r\n            return item.abnormalType === this.abnormalParams.abnormalType;\r\n        })\r\n        this.abnormalParams.total = this.abnormalParams.list.length;\r\n        this.dealData(pageNum,'abnormal');\r\n      },\r\n      /** 重置按钮操作 */\r\n      resetQuery() {\r\n        this.dateRange = [];\r\n        this.resetForm(\"queryForm\");\r\n        this.handleQuery();\r\n      },\r\n      back(){\r\n        this.$router.push({name: \"Index\",params: { back: true }});\r\n      },\r\n      changeAbnormalType(){\r\n        if(this.abnormalParams.abnormalType){\r\n          let list = this.abnormalOptions.filter(item=> item.dictValue === this.abnormalParams.abnormalType)\r\n          this.reason = list[0].reason;\r\n        }else{\r\n          this.reason = ''\r\n        }\r\n      },\r\n      gotoXq(row){\r\n        localStorage.setItem('custNo', row.custNo);\r\n        localStorage.setItem('pageNum', this.abnormalParams.pageNum);\r\n        localStorage.setItem('abnormal', true);\r\n        this.$router.push({path: \"/dlkcw/xq\",query: { custNo: row.custNo }});\r\n      },\r\n      exportToExcel() {\r\n        const headers = ['站点名称', '异常类型', '数据范围', '异常说明']\r\n        const data = this.abnormalParams.list.map(item => [item.siteName, this.abnormalTypeFormat(item), item.dataRange,item.msg])\r\n        exportData(headers,data,'异常数据列表','异常数据');\r\n      }\r\n    },\r\n  };\r\n  </script>\r\n  \r\n  <style lang=\"scss\" scoped>\r\n  @import \"./style.scss\";\r\n  </style>"]}]}