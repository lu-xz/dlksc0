{"remainingRequest":"D:\\work\\dlksc\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\work\\dlksc\\src\\views\\dlksc\\index.vue?vue&type=style&index=0&id=10c4470c&lang=scss&scoped=true&","dependencies":[{"path":"D:\\work\\dlksc\\src\\views\\dlksc\\index.vue","mtime":1765265735946},{"path":"D:\\work\\dlksc\\node_modules\\css-loader\\dist\\cjs.js","mtime":1741571480126},{"path":"D:\\work\\dlksc\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1741571481712},{"path":"D:\\work\\dlksc\\node_modules\\postcss-loader\\src\\index.js","mtime":1741571480819},{"path":"D:\\work\\dlksc\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1741571479550},{"path":"D:\\work\\dlksc\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1741571479562},{"path":"D:\\work\\dlksc\\node_modules\\vue-loader\\lib\\index.js","mtime":1741571481108}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCkBpbXBvcnQgIi4vc3R5bGUuc2NzcyI7DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAq0BA","file":"index.vue","sourceRoot":"src/views/dlksc","sourcesContent":["<template>\r\n  <div>\r\n    <!-- <el-row>\r\n      <el-col :span=\"6\"\r\n        ><div class=\"grid-content bg-purple\">\r\n          <div class=\"c1\">\r\n            <div class=\"title\">铜山区村污站点发展趋势统计图</div>\r\n            <div id=\"echart1\" style=\"width: 100%; height: 340px\"></div>\r\n          </div>\r\n          <div class=\"c2\">\r\n            <div class=\"title\" @click=\"goToChart\" style=\"cursor: pointer;\">铜山区村污站点处理量、用电量统计图</div>\r\n            <div id=\"echart2\" style=\"width: 100%; height: 340px\"></div>\r\n          </div></div\r\n      ></el-col>\r\n      <el-col :span=\"12\"\r\n        ><div class=\"grid-content bg-purple\" style=\"position: relative\">\r\n          <div class=\"c3 clearfix\">\r\n            <el-carousel indicator-position=\"none\" :interval=\"interval\" height=\"100px\" :arrow=\"carousels.length > 1?'hover':'never'\">\r\n              <el-carousel-item v-for=\"(town,i) in carousels\" :key=\"i\">\r\n                <ul>\r\n                  <li v-for=\"(item, index) in town\" :key=\"index\" @click=\"handleSiteName(item)\" style=\"cursor: pointer;\">\r\n                    <div :class=\"'num num' + (index + 4*i)\">{{ item.num }}</div>\r\n                    <div class=\"numTitle\">{{ item.town }}村污站点数</div>\r\n                  </li>\r\n                </ul>\r\n              </el-carousel-item>\r\n            </el-carousel>\r\n            <i\r\n              :class=\"isAuto ? 'el-icon-video-pause':'el-icon-video-play'\"\r\n              @click=\"handleAutoPlay\"\r\n              :style=\"{\r\n                position: 'absolute',\r\n                top: '135px',\r\n                left: '100px',\r\n                color: isAuto ? 'yellow':'green',\r\n                cursor: 'pointer',\r\n                fontSize: '22px'\r\n              }\"\r\n              :title=\"isAuto ? '暂停':'播放'\"\r\n            ></i>\r\n\r\n            <i\r\n              class=\"el-icon-refresh\"\r\n              @click=\"handleRefresh\"\r\n              style=\"\r\n                position: absolute;\r\n                top: 135px;\r\n                left: 150px;\r\n                color: greenyellow;\r\n                cursor: pointer;\r\n                font-size: 20px;\r\n              \"\r\n              title=\"重置\"\r\n            ></i>\r\n            \r\n            <i\r\n              class=\"el-icon-search\"\r\n              @click=\"showIcon\"\r\n              style=\"\r\n                position: absolute;\r\n                top: 135px;\r\n                right: 150px;\r\n                color: greenyellow;\r\n                cursor: pointer;\r\n                font-size: 20px;\r\n              \"\r\n              title=\"展开/隐藏搜索框\"\r\n            ></i>\r\n            <i\r\n              class=\"el-icon-bell\"\r\n              @click=\"handleAbnormal\"\r\n              style=\"\r\n                position: absolute;\r\n                top: 135px;\r\n                right: 100px;\r\n                color: yellow;\r\n                cursor: pointer;\r\n                font-size: 20px;\r\n              \"\r\n              title=\"查看异常数据分析\"\r\n            ></i>\r\n            <div class=\"ts\">\r\n              <div v-show=\"!ssicon\">\r\n                <el-input\r\n                  v-model=\"siteName\"\r\n                  placeholder=\"请输入镇/行政村/自然村\"\r\n                  style=\"width: 300px; padding-right: 8px;\"\r\n                  clearable\r\n                ></el-input\r\n                >\r\n                <el-button type=\"primary\" icon=\"el-icon-search\" @click=\"handleQuery\">搜索</el-button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"c4\">\r\n            <Tongshan :map-data=\"mapData\" :center-data=\"center\"/>\r\n          </div></div\r\n      ></el-col>\r\n      <el-col :span=\"6\"\r\n        ><div class=\"grid-content bg-purple\">\r\n          <div class=\"c5\">\r\n            <div class=\"title\">铜山区村污站点处理量率统计图</div>\r\n            <div id=\"echart5\" style=\"width: 100%; height: 340px\"></div>\r\n          </div>\r\n          <div class=\"c6\">\r\n            <div class=\"title\">铜山区村污站点污水处理单耗排名<span :style=\"{color: (isAsc?'#3AF3FF':'#F62D45'),fontWeight:'800'}\">{{ isAsc ? '前':'后' }}10</span></div>\r\n            <div class=\"px\" @click=\"px\" title=\"排序\"><img src=\"../../assets/dlkcwImg/px.png\"></div>\r\n            <el-table\r\n              :data=\"costList\"\r\n              ref=\"costTable\"\r\n              id=\"boxed\"\r\n              @cell-mouse-enter=\"mouseEnter\"\r\n              @cell-mouse-leave=\"mouseLeave\"\r\n              style=\"width: 100%\"\r\n              :header-cell-style=\"{\r\n                padding: '16px',\r\n                background: 'none',\r\n                color: '#fff',\r\n                fontWeight: '400',\r\n                fontSize: '16px',\r\n              }\"\r\n              height=\"360px\"\r\n              v-loading=\"loading\"\r\n              element-loading-text=\"拼命加载中\"\r\n              element-loading-spinner=\"el-icon-loading\"\r\n              element-loading-background=\"rgba(0, 0, 0, 0.8)\"\r\n            >\r\n              <el-table-column\r\n                prop=\"name\"\r\n                label=\"站点名称\"\r\n                align=\"center\"\r\n                show-overflow-tooltip\r\n              >\r\n                <template slot-scope=\"scope\">\r\n                  <span @click=\"gotoXq(scope.row)\" style=\"cursor: pointer;\">{{ scope.row.town + scope.row.administrativeVillage + scope.row.naturalVillage }}</span>\r\n                </template>\r\n              </el-table-column>\r\n              <el-table-column\r\n                prop=\"dealCost\"\r\n                label=\"污水处理单耗(kW·h/m³)\"\r\n                align=\"center\"\r\n                show-overflow-tooltip\r\n              >\r\n              </el-table-column>\r\n            </el-table>\r\n          </div></div\r\n      ></el-col>\r\n    </el-row> -->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport * as echarts from \"echarts\";\r\nimport Tongshan from \"./tongshan.vue\";\r\n// 引入插件\r\nimport { loopShowTooltip } from '@/utils/tooltip-auto-show-vue'\r\nimport { map, getCwSiteCountByTown, getAllAbnormalList, getAllDealPowerList, getAllPowerList } from '@/api/dlkcw/index';\r\nimport PinyinMatch from 'pinyin-match';\r\nexport default {\r\n  components: {\r\n    Tongshan,\r\n  },\r\n  data() {\r\n    return {\r\n      townData: require(\"@/static/json/townData.json\"),\r\n      mapData: [],\r\n      initMapData: require(\"@/static/json/mapData.json\"),\r\n      costList: require(\"@/static/json/mapData.json\"),\r\n      loading: false,\r\n      timer: null,\r\n      ssicon: true,\r\n      siteName: '',\r\n      back: false,\r\n      trendsData: require(\"@/static/json/trends.json\"),\r\n      dealRateData: require(\"@/static/json/dealRate.json\"),\r\n      dealPowerData: require(\"@/static/json/dealPower.json\"),\r\n      abnormalList: require(\"@/static/json/abnormal.json\"),\r\n      dealPowerList: [],\r\n      powerList: [],\r\n      tootipTimer1: null,\r\n      tootipTimer2: null,\r\n      tootipTimer5: null,\r\n      center: '',\r\n      isAsc: true,\r\n      isAuto: false,\r\n      isPlay: false,\r\n      createDate: null,\r\n      carousels:[],\r\n      interval: 8000\r\n    };\r\n  },\r\n  created() {},\r\n  mounted() {\r\n    this.back = this.$route.params && this.$route.params.back;\r\n    if(!this.back){\r\n      localStorage.setItem('siteName','');\r\n      localStorage.setItem('center','');\r\n    }\r\n    // 静态页面直接加载\r\n    if(JSON.parse(process.env.VUE_APP_IS_STATIC)){\r\n      let costList = this.initMapData.filter(item=> item.dealCost > 0.1);\r\n      this.costList = costList.slice(0,10);\r\n      this.filterMapData();\r\n      this.groupedArr();\r\n      this.echart1();\r\n      this.echart2();\r\n      this.echart5();\r\n      setTimeout(() => {\r\n        this.handScroll();\r\n      }, 5000);\r\n    }else{\r\n      // 动态页面调用接口获取数据\r\n      this.getTownData();\r\n      this.getAbnormalList();\r\n      this.getAllDealPowerList();\r\n      this.getAllPowerList();\r\n    }\r\n  },\r\n  beforeDestroy() {\r\n    if (this.timer) {\r\n      clearInterval(this.timer);\r\n      this.timer = null;\r\n    }\r\n    if (this.tootipTimer1) {\r\n      clearInterval(this.tootipTimer1);\r\n      this.tootipTimer1 = null;\r\n    }\r\n    if (this.tootipTimer2) {\r\n      clearInterval(this.tootipTimer2);\r\n      this.tootipTimer2 = null;\r\n    }\r\n    if (this.tootipTimer5) {\r\n      clearInterval(this.tootipTimer5);\r\n      this.tootipTimer5 = null;\r\n    }\r\n  },\r\n  methods: {\r\n    groupedArr() {\r\n      const result = [];\r\n      for (let i = 0; i < this.townData.length; i += 4) {\r\n        result.push(this.townData.slice(i, i + 4));\r\n      }\r\n      this.carousels = result;\r\n    },\r\n    getMapData(){\r\n      map().then((res) => {\r\n        const data = res.data;\r\n        this.mapData = data.siteList;\r\n        this.initMapData = data.siteList;\r\n        let costList = this.initMapData.filter(item=> item.dealCost > 0.1);\r\n        this.costList = costList.slice(0,10);\r\n        this.trendsData = data.trendsData;\r\n        this.dealRateData = data.dealRateData;\r\n        this.dealPowerData = data.dealPowerData;\r\n        this.filterMapData();\r\n        this.echart1();\r\n        this.echart2();\r\n        this.echart5();\r\n        setTimeout(() => {\r\n          this.handScroll();\r\n        }, 5000);\r\n      })\r\n    },\r\n    filterMapData(){\r\n      const currentYear = new Date().getFullYear();\r\n      const currentMonth = new Date().getMonth();\r\n      const lastMonthDate = new Date(currentYear, currentMonth - 1, 1);\r\n      const lastMonth = lastMonthDate.getMonth() + 1;\r\n      this.initMapData.forEach(item=>{\r\n        item.abnormalCount = this.abnormalList.filter(a=> a.custNo === item.custNo && a.dataRange.indexOf(lastMonth + '月') > -1).length;\r\n      })\r\n      const siteName = localStorage.getItem('siteName');\r\n      this.center = localStorage.getItem('center');\r\n      if(this.back && siteName){\r\n        this.siteName = siteName;\r\n        this.ssicon = false;\r\n      }\r\n      this.handleQuery();\r\n    },\r\n    getTownData(){\r\n      getCwSiteCountByTown().then((res) => {\r\n        this.townData = res.data;\r\n        this.groupedArr();\r\n      })\r\n    },\r\n    getAbnormalList(){\r\n      getAllAbnormalList().then((res) => {\r\n        this.abnormalList = res.data;\r\n        this.getMapData();\r\n      })\r\n    },\r\n    getAllDealPowerList(){\r\n      getAllDealPowerList().then((res) => {\r\n        this.dealPowerList = res.data;\r\n      })\r\n    },\r\n    getAllPowerList(){\r\n      getAllPowerList().then((res) => {\r\n        this.powerList = res.data;\r\n      })\r\n    },\r\n    echart1() {\r\n      var chartDom = document.getElementById(\"echart1\");\r\n      var myChart = echarts.init(chartDom);\r\n      var option;\r\n      let x = this.trendsData.xData;\r\n      let y = this.trendsData.yData;\r\n      const that = this;\r\n      option = {\r\n        color: [\"#2880E1\", \"#3FA0F9\"],\r\n        title: {\r\n          text: \"村污站点数(个)\",\r\n          textStyle: {\r\n            color: \"#fff\",\r\n            fontSize: 16,\r\n          },\r\n          left: 0,\r\n          top: 20,\r\n        },\r\n        tooltip: {\r\n          show: true,\r\n          trigger: \"axis\",\r\n          textStyle: {\r\n            fontSize: 14,\r\n          },\r\n          axisPointer: {\r\n            lineStyle: {\r\n              color: {\r\n                type: \"linear\",\r\n                x: 0,\r\n                y: 0,\r\n                x2: 0,\r\n                y2: 1,\r\n\r\n                global: false,\r\n              },\r\n            },\r\n          },\r\n          borderColor: \"rgba(18, 57, 60, .8)\",\r\n        },\r\n\r\n        legend: {\r\n          // icon: 'circle',\r\n          // itemWidth: 10,\r\n          show: false,\r\n          itemGap: 4,\r\n          x: \"right\",\r\n          top: \"3%\",\r\n          textStyle: {\r\n            color: \"#fff\",\r\n            fontSize: 14,\r\n            // padding:[0, 6, 0, 50],\r\n          },\r\n        },\r\n        grid: {\r\n          top: \"23%\",\r\n          left: \"3%\",\r\n          right: \"6%\",\r\n          bottom: \"5%\",\r\n          containLabel: true,\r\n        },\r\n        xAxis: [\r\n          {\r\n            type: \"category\",\r\n            axisLine: {\r\n              lineStyle: {\r\n                color: \"#fff\",\r\n              },\r\n            },\r\n            axisLabel: {\r\n              fontSize: 14,\r\n              color: \"#fff\",\r\n            },\r\n            splitLine: {\r\n              show: false,\r\n            },\r\n            axisTick: {\r\n              show: false,\r\n            },\r\n            axisLine: {\r\n              show: false,\r\n            },\r\n            boundaryGap: false,\r\n            data: x,\r\n          },\r\n        ],\r\n\r\n        yAxis: [\r\n          {\r\n            type: \"value\",\r\n            splitNumber: 6,\r\n            axisLine: {\r\n              show: false,\r\n            },\r\n            splitLine: {\r\n              show: true,\r\n              lineStyle: {\r\n                color: \"#1C2139\",\r\n                type: \"dashed\",\r\n              },\r\n            },\r\n            axisLabel: {\r\n              color: \"#fff\",\r\n              fontSize: 14,\r\n            },\r\n            axisTick: {\r\n              show: false,\r\n            },\r\n          },\r\n        ],\r\n        series: [\r\n          {\r\n            name: \"村污站点数\",\r\n            type: \"line\",\r\n            showSymbol: true,\r\n            symbolSize: 8,\r\n            smooth: true,\r\n            lineStyle: {\r\n              color: \"#2880E1\",\r\n            },\r\n            itemStyle: {\r\n              color: \"#2880E1\",\r\n              borderColor: \"#2880E1\",\r\n              borderWidth: 2,\r\n            },\r\n            areaStyle: {\r\n              color: new echarts.graphic.LinearGradient(\r\n                0,\r\n                0,\r\n                0,\r\n                1,\r\n                [\r\n                  {\r\n                    offset: 0,\r\n                    color: \"#2880E1\",\r\n                  },\r\n                  {\r\n                    offset: 1,\r\n                    color: \"#0C1939\",\r\n                  },\r\n                ],\r\n                false\r\n              ),\r\n            },\r\n            data: y,\r\n          },\r\n        ],\r\n      };\r\n      option && myChart.setOption(option);\r\n      // 调用方法\r\n      this.tootipTimer1 && this.tootipTimer1.clearLoop();\r\n      this.tootipTimer1 = null;\r\n      this.tootipTimer1 = loopShowTooltip(myChart, option, {\r\n        interval: 3000, // 轮播间隔时间\r\n        loopSeries: true // 是否开启轮播循环\r\n      },function(date,isAuto){\r\n        that.createDate = date;\r\n        that.isAuto = that.isPlay && isAuto;\r\n        if(that.isAuto){\r\n          that.handleQuery();\r\n        }\r\n      });\r\n      // 添加 resize 事件监听\r\n      window.addEventListener(\"resize\", function() {\r\n        // 重新计算图表容器大小\r\n        myChart && myChart.resize();\r\n      });\r\n    },\r\n    echart2() {\r\n      var chartDom = document.getElementById(\"echart2\");\r\n      var myChart = echarts.init(chartDom);\r\n      var option;\r\n      let xData = this.dealPowerData.xData;\r\n      let dealData = this.dealPowerData.dealData;\r\n      let powerData = this.dealPowerData.powerData;\r\n      option = {\r\n        tooltip: {\r\n          trigger: \"axis\",\r\n          axisPointer: {\r\n            type: \"cross\",\r\n            crossStyle: {\r\n              color: \"#999\",\r\n            },\r\n          },\r\n        },\r\n        color: [\"#098173\"],\r\n        title: {\r\n          text: \"\",\r\n          textStyle: {\r\n            color: \"#fff\",\r\n            fontSize: 16,\r\n          },\r\n          left: 0,\r\n          top: 15,\r\n        },\r\n        tooltip: {\r\n          trigger: \"axis\",\r\n          axisPointer: {\r\n            type: \"shadow\",\r\n          },\r\n        },\r\n        grid: {\r\n          top: \"20%\",\r\n          left: \"3%\",\r\n          right: \"3%\",\r\n          bottom: \"0%\",\r\n          containLabel: true,\r\n        },\r\n        legend: {\r\n          data: [\"处理量\", \"用电量\"],\r\n          textStyle: {\r\n            color: '#fff', // 设置字体颜色为白色\r\n            fontSize: '16'\r\n          }\r\n        },\r\n        xAxis: [\r\n          {\r\n            type: \"category\",\r\n            data: xData,\r\n            axisLine: {\r\n              lineStyle: {\r\n                color: \"#fff\",\r\n              },\r\n            },\r\n            axisLabel: {\r\n              fontSize: 14,\r\n              color: \"#fff\",\r\n            },\r\n            splitLine: {\r\n              show: false,\r\n            },\r\n            axisTick: {\r\n              show: false,\r\n            },\r\n            axisLine: {\r\n              show: false,\r\n            },\r\n          },\r\n        ],\r\n        yAxis: [\r\n          {\r\n            type: \"value\",\r\n            name: \"\",\r\n            axisLabel: {\r\n              formatter: \"{value}\",\r\n            },\r\n\r\n            splitLine: {\r\n              show: true,\r\n              lineStyle: {\r\n                color: \"#1C2139\",\r\n                type: \"dashed\",\r\n              },\r\n            },\r\n            axisLabel: {\r\n              color: \"#fff\",\r\n              fontSize: 14,\r\n            },\r\n          },\r\n          {\r\n            type: \"value\",\r\n            name: \"\",\r\n            axisLabel: {\r\n              formatter: \"{value}\",\r\n            },\r\n\r\n            splitLine: {\r\n              show: true,\r\n              lineStyle: {\r\n                color: \"#1C2139\",\r\n                type: \"dashed\",\r\n              },\r\n            },\r\n            axisLabel: {\r\n              color: \"#fff\",\r\n              fontSize: 14,\r\n            },\r\n          },\r\n        ],\r\n        series: [\r\n          {\r\n            name: \"处理量\",\r\n            type: \"bar\",\r\n            tooltip: {\r\n              valueFormatter: function (value) {\r\n                return value + \"\";\r\n              },\r\n            },\r\n            data: dealData,\r\n            itemStyle: {\r\n              color: {\r\n                x: 0,\r\n                y: 0,\r\n                x2: 0,\r\n                y2: 1,\r\n                type: \"linear\",\r\n                global: false,\r\n                colorStops: [\r\n                  { offset: 1, color: \"rgba(47, 160, 255, 1)\" },\r\n                  { offset: 0, color: \"rgba(47, 160, 255, .1)\" },\r\n                ],\r\n              },\r\n              borderWidth: 1,\r\n              borderColor: \"rgba(47, 160, 255, 1)\",\r\n            },\r\n            barWidth: \"30%\",\r\n            showBackground: true,\r\n          },\r\n          {\r\n            name: \"用电量\",\r\n            type: \"line\",\r\n            yAxisIndex: 1,\r\n            tooltip: {\r\n              valueFormatter: function (value) {\r\n                return value + \"\";\r\n              },\r\n            },\r\n            showSymbol: true,\r\n            symbolSize: 8,\r\n            // smooth: true,\r\n            lineStyle: {\r\n              color: \"#F6B221\",\r\n            },\r\n            itemStyle: {\r\n              color: \"#F6B221\",\r\n              borderColor: \"#F6B221\",\r\n              borderWidth: 2,\r\n            },\r\n            data: powerData,\r\n          },\r\n        ],\r\n      };\r\n      option && myChart.setOption(option);\r\n      // 调用方法\r\n      this.tootipTimer2 && this.tootipTimer2.clearLoop();\r\n      this.tootipTimer2 = null;\r\n      this.tootipTimer2 = loopShowTooltip(myChart, option, {\r\n        interval: 3000, // 轮播间隔时间\r\n        loopSeries: true // 是否开启轮播循环\r\n      });\r\n      // 添加 resize 事件监听\r\n      window.addEventListener(\"resize\", function() {\r\n        // 重新计算图表容器大小\r\n        myChart && myChart.resize();\r\n      });\r\n    },\r\n    echart5() {\r\n      var chartDom = document.getElementById(\"echart5\");\r\n      var myChart = echarts.init(chartDom);\r\n      var option;\r\n      let x = this.dealRateData.xData;\r\n      let y = this.dealRateData.yData;\r\n      option = {\r\n        color: [\"#098173\"],\r\n        title: {\r\n          text: \"处理量率(%)\",\r\n          textStyle: {\r\n            color: \"#fff\",\r\n            fontSize: 16,\r\n          },\r\n          left: 0,\r\n          top: 20,\r\n        },\r\n        tooltip: {\r\n          trigger: \"axis\",\r\n          axisPointer: {\r\n            type: \"shadow\",\r\n          },\r\n        },\r\n        grid: {\r\n          top: \"23%\",\r\n          left: \"3%\",\r\n          right: \"3%\",\r\n          bottom: \"5%\",\r\n          containLabel: true,\r\n        },\r\n        xAxis: [\r\n          {\r\n            type: \"category\",\r\n            data: x,\r\n            axisLine: {\r\n              lineStyle: {\r\n                color: \"#fff\",\r\n              },\r\n            },\r\n            axisLabel: {\r\n              fontSize: 14,\r\n              color: \"#fff\",\r\n            },\r\n          },\r\n        ],\r\n        yAxis: {\r\n          splitLine: {\r\n            show: true,\r\n            lineStyle: {\r\n              color: \"#1C2139\",\r\n              type: \"dashed\",\r\n            },\r\n          },\r\n          axisLabel: {\r\n            color: \"#fff\",\r\n            fontSize: 14,\r\n          },\r\n        },\r\n        series: [\r\n          {\r\n            name: \"村污站点数\",\r\n            type: \"bar\",\r\n            label: {\r\n              show: true,\r\n              color: '#fff',\r\n              fontSize: 14,\r\n              position: 'top',\r\n              formatter: '{c}'\r\n            },\r\n            itemStyle: {\r\n              color: {\r\n                x: 0,\r\n                y: 0,\r\n                x2: 0,\r\n                y2: 1,\r\n                type: \"linear\",\r\n                global: false,\r\n                colorStops: [\r\n                  { offset: 1, color: \"#0FC58B\" },\r\n                  { offset: 0, color: \"#14171E\" },\r\n                ],\r\n              },\r\n              borderWidth: 1,\r\n              borderColor: \"#0FC58B\",\r\n            },\r\n            barWidth: \"30%\",\r\n            showBackground: true,\r\n            data: y,\r\n          },\r\n        ],\r\n      };\r\n      option && myChart.setOption(option);\r\n      // 调用方法\r\n      this.tootipTimer5 && this.tootipTimer5.clearLoop();\r\n      this.tootipTimer5 = null;\r\n      this.tootipTimer5 = loopShowTooltip(myChart, option, {\r\n        interval: 3000, // 轮播间隔时间\r\n        loopSeries: true // 是否开启轮播循环\r\n      });\r\n      // 添加 resize 事件监听\r\n      window.addEventListener(\"resize\", function() {\r\n        // 重新计算图表容器大小\r\n        myChart && myChart.resize();\r\n      });\r\n    },\r\n    mouseEnter() {\r\n      clearInterval(this.timer);\r\n      this.timer = null;\r\n    },\r\n    //鼠标移出\r\n    mouseLeave() {\r\n      this.handScroll();\r\n    },\r\n    // 表格滚动\r\n    handScroll() {\r\n      const table = this.$refs.costTable;\r\n      if(!table){\r\n        return;\r\n      }\r\n      const divData = table.bodyWrapper;\r\n      this.timer = setInterval(() => {\r\n        divData.scrollTop += 1;\r\n        if (divData.clientHeight + divData.scrollTop == divData.scrollHeight) {\r\n          divData.scrollTop = 0;\r\n        }\r\n      }, 60);\r\n    },\r\n    showIcon(){\r\n      this.ssicon = !this.ssicon\r\n    },\r\n    handleQuery() {\r\n      let mapData = this.initMapData;\r\n      if(this.siteName){\r\n        mapData = mapData.filter(item=> (item.town + item.administrativeVillage + item.naturalVillage).indexOf(this.siteName) > -1 \r\n        || PinyinMatch.match((item.town + item.administrativeVillage + item.naturalVillage), this.siteName));\r\n      }else{\r\n        this.center = '';\r\n      }\r\n      if(this.isAuto && this.createDate){\r\n        const dates = this.createDate.split('-');\r\n        const year = parseInt(dates[0]);\r\n        const month = parseInt(dates[1]);\r\n        mapData = mapData.filter(item=>{\r\n          const createDates = item.createDate.split('-');\r\n          const createYear = parseInt(createDates[0]);\r\n          const createMonth = parseInt(createDates[1]);\r\n          return createYear < year || (createYear == year && createMonth <= month);\r\n        })\r\n      }\r\n      this.mapData = mapData\r\n      localStorage.setItem('siteName', this.siteName);\r\n      localStorage.setItem('center', this.center);\r\n    },\r\n    handleAbnormal(){\r\n      this.$router.push('/dlkcw/abnormal');\r\n    },\r\n    handleSiteName(item){\r\n      this.siteName = item.town;\r\n      this.center = item.center;\r\n      this.ssicon = false;\r\n      this.handleQuery();\r\n    },\r\n    px(){\r\n      this.isAsc = !this.isAsc;\r\n      let costList = this.initMapData.filter(item=> item.dealCost > 0);\r\n      if(!this.isAsc){\r\n        costList.reverse();\r\n      }\r\n      this.costList = costList.slice(0,10);\r\n    },\r\n    handleAutoPlay(){\r\n      this.isPlay = !this.isPlay;\r\n      this.isAuto = !this.isAuto;\r\n      this.handleQuery();\r\n    },\r\n    handleRefresh(){\r\n      this.siteName = '';\r\n      this.ssicon = true;\r\n      this.handleQuery();\r\n    },\r\n    gotoXq(row){\r\n      this.$router.push({path: \"/dlkcw/xq\",query: { custNo: row.custNo }});\r\n    },\r\n    goToChart(){\r\n      //this.$router.push('/dlkcw/chart');\r\n    }\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import \"./style.scss\";\r\n</style>\r\n"]}]}