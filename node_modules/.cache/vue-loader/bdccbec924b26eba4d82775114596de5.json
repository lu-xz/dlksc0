{"remainingRequest":"D:\\svnNew\\徐州\\dlkcw\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\svnNew\\徐州\\dlkcw\\src\\views\\dlkcw\\xq.vue?vue&type=style&index=0&id=40471d0b&lang=scss&scoped=true&","dependencies":[{"path":"D:\\svnNew\\徐州\\dlkcw\\src\\views\\dlkcw\\xq.vue","mtime":1741570207232},{"path":"D:\\svnNew\\徐州\\dlkcw\\node_modules\\css-loader\\dist\\cjs.js","mtime":1741571480126},{"path":"D:\\svnNew\\徐州\\dlkcw\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1741571481712},{"path":"D:\\svnNew\\徐州\\dlkcw\\node_modules\\postcss-loader\\src\\index.js","mtime":1741571480819},{"path":"D:\\svnNew\\徐州\\dlkcw\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1741571479550},{"path":"D:\\svnNew\\徐州\\dlkcw\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1741571479562},{"path":"D:\\svnNew\\徐州\\dlkcw\\node_modules\\vue-loader\\lib\\index.js","mtime":1741571481108}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KQGltcG9ydCAiLi9zdHlsZS5zY3NzIjsNCg=="},{"version":3,"sources":["xq.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0lBA","file":"xq.vue","sourceRoot":"src/views/dlkcw","sourcesContent":["<template>\r\n  <div class=\"main\">\r\n    <el-row>\r\n      <el-col :span=\"24\">\r\n        <div class=\"back\" @click=\"back\">返回</div>\r\n        <div class=\"cc1 clearfix\">\r\n          <div class=\"title2\">{{ cwSite.town + cwSite.administrativeVillage + cwSite.naturalVillage }}</div>\r\n          <ul>\r\n            <li>\r\n              <span class=\"name\">设计处理量：</span\r\n              ><span class=\"num\" style=\"color: #3AF3FF;font-size: 16px;\">{{ cwSite.dealNum }} m³/d</span>\r\n            </li>\r\n            <li>\r\n              <span class=\"name\">电表户号：</span\r\n              ><span class=\"num\" style=\"color: #3AF3FF;font-size: 16px;\">{{ cwSite.custNo }}</span>\r\n            </li>\r\n            <li>\r\n              <span class=\"name\">建档日期：</span\r\n              ><span class=\"num\" style=\"color: #3AF3FF;font-size: 16px;\">{{ cwSite.createDate }}</span>\r\n            </li>\r\n            <li>\r\n              <span class=\"name\">处理量率：</span><span class=\"num\" style=\"color: #3AF3FF;font-size: 16px;\">{{ cwSite.dealRate }} %</span>\r\n            </li>\r\n            <li>\r\n              <span class=\"name\">污水处理单耗：</span\r\n              ><span class=\"num\" style=\"color: #3AF3FF;font-size: 16px;\">{{ cwSite.dealCost }} kW·h/m³</span>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      </el-col>\r\n      <el-col :span=\"24\" style=\"padding: 20px 0\">\r\n        <el-row :gutter=\"20\">\r\n          <!-- <el-col :span=\"8\">\r\n            <div class=\"yy\">\r\n              <div class=\"title3\">当前站点处理量统计图</div>\r\n              <div id=\"deal\" style=\"width: 100%; height: 250px\"></div></div\r\n          ></el-col> -->\r\n          <el-col :span=\"14\">\r\n            <div class=\"yy\">\r\n              <div class=\"title3\">当前站点日用电量曲线图</div>\r\n              <div id=\"power\" style=\"width: 100%; height: 250px\"></div></div\r\n          ></el-col>\r\n          <el-col :span=\"10\">\r\n            <div class=\"yy\">\r\n              <div class=\"title3\">当前站点处理量、用电量统计图</div>\r\n              <div id=\"dealPower\" style=\"width: 100%; height: 250px\"></div></div\r\n          ></el-col> </el-row\r\n      ></el-col>\r\n      <el-col :span=\"24\">\r\n        <div class=\"cc3\">\r\n          <div class=\"title4\">异常数据分析列表</div>\r\n          <el-table\r\n            :data=\"abnormalList\"\r\n            style=\"width: 100%\"\r\n            :header-cell-style=\"{\r\n              padding: '12px',\r\n              background: 'none',\r\n              color: '#fff',\r\n              fontWeight: '600',\r\n              fontSize: '16px',\r\n            }\"\r\n            v-loading=\"loading\"\r\n            element-loading-text=\"拼命加载中\"\r\n            element-loading-spinner=\"el-icon-loading\"\r\n            element-loading-background=\"rgba(0, 0, 0, 0.8)\"\r\n          >\r\n            <el-table-column\r\n              prop=\"abnormalType\"\r\n              label=\"异常类型\"\r\n              align=\"center\"\r\n              width=\"300\"\r\n              :formatter=\"abnormalTypeFormat\"\r\n              show-overflow-tooltip\r\n            >\r\n            </el-table-column>\r\n            <el-table-column\r\n              prop=\"dataRange\"\r\n              label=\"数据范围\"\r\n              align=\"center\"\r\n              width=\"200\"\r\n              show-overflow-tooltip\r\n            >\r\n            </el-table-column>\r\n            <el-table-column\r\n              prop=\"msg\"\r\n              label=\"异常说明\"\r\n              align=\"center\"\r\n              show-overflow-tooltip\r\n            >\r\n            </el-table-column>\r\n          </el-table>\r\n          <pagination\r\n            v-show=\"abnormalParams.total > 0\"\r\n            :total=\"abnormalParams.total\"\r\n            :page.sync=\"abnormalParams.pageNum\"\r\n            :limit.sync=\"abnormalParams.pageSize\"\r\n            :page-sizes=\"[3]\"\r\n            layout=\"total,prev,pager,next\"\r\n            @pagination=\"(page) => {pageChange(page,'abnormal');}\"\r\n          />\r\n        </div>\r\n      </el-col>\r\n    </el-row>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport * as echarts from \"echarts\";\r\nimport { getCwSite, getAbnormalList, getDealPower, getPower } from '@/api/dlkcw/index';\r\nexport default {\r\n  data() {\r\n    return {\r\n      abnormalList: [],\r\n      loading: false,\r\n      abnormalParams: {\r\n        pageNum: 1,\r\n        pageSize: 3,\r\n        total: 0,\r\n        list: [],\r\n        data: require(\"@/static/json/abnormal.json\")\r\n      },\r\n      abnormalOptions:[{\r\n        dictLabel:'有处理量但低（零）用电量',dictValue:'1'\r\n      },{\r\n        dictLabel:'有处理量但高用电量',dictValue:'2'\r\n      },{\r\n        dictLabel:'高处理量但低用电量',dictValue:'3'\r\n      },{\r\n        dictLabel:'处理量类似但用电量变化大',dictValue:'4'\r\n      },{\r\n        dictLabel:'处理量减少但用电量增加',dictValue:'5'\r\n      },{\r\n        dictLabel:'处理量增加但用电量减少',dictValue:'6'\r\n      },{\r\n        dictLabel:'处理量满负荷或超90%',dictValue:'7'\r\n      }],\r\n      custNo: '',\r\n      cwSite:{town:'',administrativeVillage:'',naturalVillage:'',dealNum:'',custNo:'',createDate:'',dealRate:'',dealCost:''},\r\n      mapData: require(\"@/static/json/mapData.json\"),\r\n      dealPowerList: require(\"@/static/json/dealPowerList.json\"),\r\n      dealPower: {},\r\n      powerList: require(\"@/static/json/power.json\"),\r\n      power: {}\r\n    };\r\n  },\r\n  created() {\r\n  \r\n  },\r\n  mounted() {\r\n    this.custNo = this.$route.query && this.$route.query.custNo;\r\n    this.getCwSiteInfo();\r\n    this.getAbnormalList();\r\n    this.getDealPowerData();\r\n    this.getPowerData();\r\n  },\r\n  methods: {\r\n    justIsStatic(){\r\n      return JSON.parse(process.env.VUE_APP_IS_STATIC);\r\n    },\r\n    getCwSiteInfo(){\r\n      if(this.justIsStatic()){\r\n        const list = this.mapData.filter(item=> item.custNo === this.custNo);\r\n        if(list && list.length > 0){\r\n          this.cwSite = list[0];\r\n        }\r\n      }else{\r\n        getCwSite(this.custNo).then((res) => {\r\n          this.cwSite = res.data;\r\n        })\r\n      }\r\n    },\r\n    getAbnormalList(){\r\n      if(this.justIsStatic()){\r\n        this.abnormalParams.list = this.abnormalParams.data.filter(item=> item.custNo === this.custNo);\r\n        this.abnormalParams.total = this.abnormalParams.list.length;\r\n        this.dealData(1,'abnormal');\r\n      }else{\r\n        getAbnormalList({custNo:this.custNo}).then((res) => {\r\n          this.abnormalParams.list = res.data;\r\n          this.abnormalParams.total = this.abnormalParams.list.length;\r\n          this.dealData(1,'abnormal');\r\n        })\r\n      }\r\n    },\r\n    pageChange(page, key) {\r\n      const pageNum = page.page;\r\n      this.dealData(pageNum, key);\r\n    },\r\n    dealData(pageNum, key) {\r\n      const data = this[key + \"Params\"].list;\r\n      const pageSize = this[key + \"Params\"].pageSize;\r\n      this[key + \"List\"] = data.slice((pageNum - 1) * pageSize, pageNum * pageSize);\r\n    },\r\n    abnormalTypeFormat(row){\r\n      return this.selectDictLabel(this.abnormalOptions,row.abnormalType);\r\n    },\r\n    getDealPowerData(){\r\n      if(this.justIsStatic()){\r\n        const list = this.dealPowerList.filter(item=> item.custNo === this.custNo);\r\n        if(list && list.length > 0){\r\n          this.dealPower = list[0];\r\n        }\r\n        this.echart3();\r\n      }else{\r\n        getDealPower(this.custNo).then((res) => {\r\n          this.dealPower = res.data;\r\n          this.echart3();\r\n        })\r\n      }\r\n    },\r\n    getPowerData(){\r\n      if(this.justIsStatic()){\r\n        const list = this.powerList.filter(item=> item.custNo === this.custNo);\r\n        if(list && list.length > 0){\r\n          this.power = list[0];\r\n        }\r\n        this.echart2();\r\n      }else{\r\n        getPower(this.custNo).then((res) => {\r\n          this.power = res.data;\r\n          this.echart2();\r\n        })\r\n      }\r\n    },\r\n    echart1() {\r\n      var chartDom = document.getElementById(\"deal\");\r\n      var myChart = echarts.init(chartDom);\r\n      var option;\r\n      let x = [\"1月\", \"2月\", \"3月\", \"4月\", \"5月\", \"6月\", \"7月\", \"8月\"];\r\n      let y = [30, 50, 60, 70, 20, 90, 20, 70];\r\n      option = {\r\n        color: [\"#098173\"],\r\n        title: {\r\n          text: \"\",\r\n          textStyle: {\r\n            color: \"#fff\",\r\n            fontSize: 16,\r\n          },\r\n          left: 0,\r\n          top: 15,\r\n        },\r\n        tooltip: {\r\n          trigger: \"axis\",\r\n          axisPointer: {\r\n            type: \"shadow\",\r\n          },\r\n        },\r\n        grid: {\r\n          top: \"20%\",\r\n          left: \"3%\",\r\n          right: \"3%\",\r\n          bottom: \"0%\",\r\n          containLabel: true,\r\n        },\r\n        xAxis: [\r\n          {\r\n            type: \"category\",\r\n            data: x,\r\n            axisLine: {\r\n              show: false,\r\n              lineStyle: {\r\n                color: \"#fff\",\r\n              },\r\n            },\r\n            axisLabel: {\r\n              fontSize: 14,\r\n              color: \"#fff\",\r\n            },\r\n            splitLine: {\r\n              show: false,\r\n            },\r\n            axisTick: {\r\n              show: false,\r\n            },\r\n            axisLine: {\r\n              show: false,\r\n            },\r\n          },\r\n        ],\r\n        yAxis: {\r\n          splitLine: {\r\n            show: true,\r\n            lineStyle: {\r\n              color: \"#1C2139\",\r\n              type: \"dashed\",\r\n            },\r\n          },\r\n          axisLabel: {\r\n            color: \"#fff\",\r\n            fontSize: 16,\r\n          },\r\n        },\r\n        series: [\r\n          {\r\n            name: \"\",\r\n            type: \"bar\",\r\n            itemStyle: {\r\n              color: {\r\n                x: 0,\r\n                y: 0,\r\n                x2: 0,\r\n                y2: 1,\r\n                type: \"linear\",\r\n                global: false,\r\n                colorStops: [\r\n                  { offset: 1, color: \"rgba(47, 160, 255, 1)\" },\r\n                  { offset: 0, color: \"rgba(47, 160, 255, .1)\" },\r\n                ],\r\n              },\r\n              borderWidth: 1,\r\n              borderColor: \"rgba(47, 160, 255, 1)\",\r\n            },\r\n            barWidth: \"30%\",\r\n            showBackground: true,\r\n            data: y,\r\n          },\r\n        ],\r\n      };\r\n      option && myChart.setOption(option);\r\n    },\r\n    echart2() {\r\n      var chartDom = document.getElementById(\"power\");\r\n      var myChart = echarts.init(chartDom);\r\n      var option;\r\n      let x = this.power.xData;\r\n      let y = this.power.yData;\r\n      option = {\r\n        color: [\"#098173\"],\r\n        title: {\r\n          text: \"\",\r\n          textStyle: {\r\n            color: \"#fff\",\r\n            fontSize: 16,\r\n          },\r\n          left: 0,\r\n          top: 15,\r\n        },\r\n        tooltip: {\r\n          trigger: \"axis\",\r\n          axisPointer: {\r\n            type: \"shadow\",\r\n          },\r\n        },\r\n        grid: {\r\n          top: \"20%\",\r\n          left: \"3%\",\r\n          right: \"3%\",\r\n          bottom: \"0%\",\r\n          containLabel: true,\r\n        },\r\n        xAxis: [\r\n          {\r\n            type: \"category\",\r\n            data: x,\r\n            axisLine: {\r\n              lineStyle: {\r\n                color: \"#fff\",\r\n              },\r\n            },\r\n            axisLabel: {\r\n              fontSize: 14,\r\n              color: \"#fff\",\r\n            },\r\n            splitLine: {\r\n              show: false,\r\n            },\r\n            axisTick: {\r\n              show: false,\r\n            },\r\n            axisLine: {\r\n              show: false,\r\n            },\r\n          },\r\n        ],\r\n        yAxis: {\r\n          type: \"value\",\r\n          splitLine: {\r\n            show: true,\r\n            lineStyle: {\r\n              color: \"#1C2139\",\r\n              type: \"dashed\",\r\n            },\r\n          },\r\n          axisLabel: {\r\n            color: \"#fff\",\r\n            fontSize: 16,\r\n          },\r\n        },\r\n        series: [\r\n          {\r\n            name: \"\",\r\n            type: \"line\",\r\n            showSymbol: true,\r\n            symbolSize: 5,\r\n            // smooth: true,\r\n            lineStyle: {\r\n              color: \"#F6B221\",\r\n            },\r\n            itemStyle: {\r\n              color: \"#F6B221\",\r\n              borderColor: \"#F6B221\",\r\n              borderWidth: 2,\r\n            },\r\n            data: y,\r\n          },\r\n        ],\r\n      };\r\n      option && myChart.setOption(option);\r\n      if(y.length === 0){\r\n        myChart.showLoading({\r\n          text: '暂无数据',\r\n          showSpinner: false,\r\n          color: '#c23531',\r\n          textColor: '#ffffc2',\r\n          fontSize: '16',\r\n          maskColor: 'rgba(255, 255, 255, 0)',\r\n          zlevel: 0\r\n        });\r\n      }else{\r\n        myChart.hideLoading();\r\n      }\r\n    },\r\n    echart3() {\r\n      var chartDom = document.getElementById(\"dealPower\");\r\n      var myChart = echarts.init(chartDom);\r\n      var option;\r\n      let xData = this.dealPower.xData;\r\n      let dealData = this.dealPower.dealData;\r\n      let powerData = this.dealPower.powerData;\r\n      option = {\r\n        tooltip: {\r\n          trigger: \"axis\",\r\n          axisPointer: {\r\n            type: \"cross\",\r\n            crossStyle: {\r\n              color: \"#999\",\r\n            },\r\n          },\r\n        },\r\n        color: [\"#098173\"],\r\n        title: {\r\n          text: \"\",\r\n          textStyle: {\r\n            color: \"#fff\",\r\n            fontSize: 16,\r\n          },\r\n          left: 0,\r\n          top: 15,\r\n        },\r\n        tooltip: {\r\n          trigger: \"axis\",\r\n          axisPointer: {\r\n            type: \"shadow\",\r\n          },\r\n        },\r\n        grid: {\r\n          top: \"20%\",\r\n          left: \"3%\",\r\n          right: \"3%\",\r\n          bottom: \"0%\",\r\n          containLabel: true,\r\n        },\r\n        legend: {\r\n          data: [\"处理量\", \"用电量\"],\r\n          textStyle: {\r\n            color: '#fff', // 设置字体颜色为白色\r\n            fontSize: '16'\r\n          }\r\n        },\r\n        xAxis: [\r\n          {\r\n            type: \"category\",\r\n            data: xData,\r\n            axisLine: {\r\n              lineStyle: {\r\n                color: \"#fff\",\r\n              },\r\n            },\r\n            axisLabel: {\r\n              fontSize: 14,\r\n              color: \"#fff\",\r\n            },\r\n            splitLine: {\r\n              show: false,\r\n            },\r\n            axisTick: {\r\n              show: false,\r\n            },\r\n            axisLine: {\r\n              show: false,\r\n            },\r\n          },\r\n        ],\r\n        yAxis: [\r\n          {\r\n            type: \"value\",\r\n            name: \"\",\r\n            axisLabel: {\r\n              formatter: \"{value}\",\r\n            },\r\n\r\n            splitLine: {\r\n              show: true,\r\n              lineStyle: {\r\n                color: \"#1C2139\",\r\n                type: \"dashed\",\r\n              },\r\n            },\r\n            axisLabel: {\r\n              color: \"#fff\",\r\n              fontSize: 16,\r\n            },\r\n          },\r\n          {\r\n            type: \"value\",\r\n            name: \"\",\r\n            axisLabel: {\r\n              formatter: \"{value}\",\r\n            },\r\n\r\n            splitLine: {\r\n              show: true,\r\n              lineStyle: {\r\n                color: \"#1C2139\",\r\n                type: \"dashed\",\r\n              },\r\n            },\r\n            axisLabel: {\r\n              color: \"#fff\",\r\n              fontSize: 16,\r\n            },\r\n          },\r\n        ],\r\n        series: [\r\n          {\r\n            name: \"处理量\",\r\n            type: \"bar\",\r\n            tooltip: {\r\n              valueFormatter: function (value) {\r\n                return value + \"\";\r\n              },\r\n            },\r\n            data: dealData,\r\n            itemStyle: {\r\n              color: {\r\n                x: 0,\r\n                y: 0,\r\n                x2: 0,\r\n                y2: 1,\r\n                type: \"linear\",\r\n                global: false,\r\n                colorStops: [\r\n                  { offset: 1, color: \"rgba(47, 160, 255, 1)\" },\r\n                  { offset: 0, color: \"rgba(47, 160, 255, .1)\" },\r\n                ],\r\n              },\r\n              borderWidth: 1,\r\n              borderColor: \"rgba(47, 160, 255, 1)\",\r\n            },\r\n            barWidth: \"30%\",\r\n            showBackground: true,\r\n          },\r\n          {\r\n            name: \"用电量\",\r\n            type: \"line\",\r\n            yAxisIndex: 1,\r\n            tooltip: {\r\n              valueFormatter: function (value) {\r\n                return value + \"\";\r\n              },\r\n            },\r\n            showSymbol: true,\r\n            symbolSize: 8,\r\n            // smooth: true,\r\n            lineStyle: {\r\n              color: \"#F6B221\",\r\n            },\r\n            itemStyle: {\r\n              color: \"#F6B221\",\r\n              borderColor: \"#F6B221\",\r\n              borderWidth: 2,\r\n            },\r\n            data: powerData,\r\n          },\r\n        ],\r\n      };\r\n      option && myChart.setOption(option);\r\n    },\r\n    back(){\r\n      const isAbnormal = localStorage.getItem('abnormal');\r\n      if(isAbnormal){\r\n        localStorage.setItem('abnormal','');\r\n        this.$router.push('/dlkcw/abnormal');\r\n      }else{\r\n        this.$router.push({name: \"Index\",params: { back: true }});\r\n      }\r\n    }\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import \"./style.scss\";\r\n</style>\r\n"]}]}