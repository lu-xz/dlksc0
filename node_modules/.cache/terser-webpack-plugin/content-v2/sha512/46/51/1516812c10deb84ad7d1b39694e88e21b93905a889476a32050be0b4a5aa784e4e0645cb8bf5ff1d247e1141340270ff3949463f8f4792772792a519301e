{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-3d63bfc7\"],{\"686a\":function(a,t,e){},\"74f1\":function(a,t,e){\"use strict\";e.r(t);var n=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e(\"div\",{staticClass:\"main\"},[e(\"el-row\",[e(\"el-col\",{attrs:{span:24}},[e(\"div\",{staticClass:\"back\",on:{click:a.back}},[a._v(\"返回\")])]),e(\"el-col\",{attrs:{span:24}},[e(\"div\",{staticClass:\"cc4\"},[e(\"div\",{staticClass:\"title4\"},[a._v(\"异常数据分析列表\")]),e(\"el-form\",{ref:\"queryForm\",attrs:{model:a.abnormalParams,inline:!0,\"label-width\":\"88px\"}},[e(\"el-form-item\",{attrs:{label:\"镇\",prop:\"town\"}},[e(\"el-select\",{staticStyle:{width:\"180px\"},attrs:{placeholder:\"全部\",clearable:\"\",filterable:\"\",\"filter-method\":a.handleFilter,size:\"small\"},on:{change:a.changTown},model:{value:a.abnormalParams.town,callback:function(t){a.$set(a.abnormalParams,\"town\",t)},expression:\"abnormalParams.town\"}},a._l(a.townOptions,(function(a){return e(\"el-option\",{key:a.town,attrs:{label:a.town,value:a.town}})})),1)],1),e(\"el-form-item\",{attrs:{label:\"站点名称\",prop:\"siteName\"}},[e(\"el-input\",{staticStyle:{width:\"240px\"},attrs:{placeholder:\"请输入站点名称\",clearable:\"\",size:\"small\"},nativeOn:{keyup:function(t){return!t.type.indexOf(\"key\")&&a._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?null:a.handleQuery(t)}},model:{value:a.abnormalParams.siteName,callback:function(t){a.$set(a.abnormalParams,\"siteName\",t)},expression:\"abnormalParams.siteName\"}})],1),e(\"el-form-item\",{attrs:{label:\"异常类型\",prop:\"abnormalType\"}},[e(\"el-select\",{staticStyle:{width:\"240px\"},attrs:{placeholder:\"全部\",clearable:\"\",size:\"small\"},on:{change:a.changeAbnormalType},model:{value:a.abnormalParams.abnormalType,callback:function(t){a.$set(a.abnormalParams,\"abnormalType\",t)},expression:\"abnormalParams.abnormalType\"}},a._l(a.abnormalOptions,(function(a){return e(\"el-option\",{key:a.dictValue,attrs:{label:a.dictLabel,value:a.dictValue}})})),1)],1),e(\"el-form-item\",[e(\"el-button\",{attrs:{type:\"primary\",icon:\"el-icon-search\",size:\"mini\"},on:{click:function(t){return a.handleQuery(1)}}},[a._v(\"搜索\")]),e(\"el-button\",{attrs:{icon:\"el-icon-refresh\",size:\"mini\"},on:{click:a.resetQuery}},[a._v(\"重置\")]),e(\"el-button\",{attrs:{type:\"warning\",icon:\"el-icon-download\",size:\"mini\"},on:{click:a.exportToExcel}},[a._v(\"导出\")])],1)],1),a.reason?e(\"div\",{staticClass:\"reason\"},[e(\"span\",{staticClass:\"suggest\"},[a._v(\"异常原因分析:\")]),a._v(\" \"+a._s(\"7\"===a.abnormalParams.abnormalType?\"\":\"可能与\")+\" \"),e(\"span\",{staticClass:\"reason-content\"},[a._v(a._s(a.reason))]),a._v(\" \"+a._s(\"7\"===a.abnormalParams.abnormalType?\"\":\"等有关\")+\" \")]):a._e(),e(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:a.loading,expression:\"loading\"}],staticStyle:{width:\"100%\"},attrs:{data:a.abnormalList,\"header-cell-style\":{padding:\"12px\",background:\"none\",color:\"#fff\",fontWeight:\"600\",fontSize:\"16px\"},\"element-loading-text\":\"拼命加载中\",\"element-loading-spinner\":\"el-icon-loading\",\"element-loading-background\":\"rgba(0, 0, 0, 0.8)\"}},[e(\"el-table-column\",{attrs:{prop:\"siteName\",label:\"站点名称\",align:\"center\",width:\"300\",\"show-overflow-tooltip\":\"\"},scopedSlots:a._u([{key:\"default\",fn:function(t){return[e(\"span\",{staticStyle:{cursor:\"pointer\"},on:{click:function(e){return a.gotoXq(t.row)}}},[a._v(a._s(t.row.siteName))])]}}])}),e(\"el-table-column\",{attrs:{prop:\"abnormalType\",label:\"异常类型\",align:\"center\",width:\"300\",formatter:a.abnormalTypeFormat,\"show-overflow-tooltip\":\"\"}}),e(\"el-table-column\",{attrs:{prop:\"dataRange\",label:\"数据范围\",align:\"center\",width:\"200\",\"show-overflow-tooltip\":\"\"}}),e(\"el-table-column\",{attrs:{prop:\"msg\",label:\"异常说明\",align:\"center\",\"show-overflow-tooltip\":\"\"}})],1),e(\"pagination\",{directives:[{name:\"show\",rawName:\"v-show\",value:a.abnormalParams.total>0,expression:\"abnormalParams.total > 0\"}],attrs:{total:a.abnormalParams.total,page:a.abnormalParams.pageNum,limit:a.abnormalParams.pageSize},on:{\"update:page\":function(t){return a.$set(a.abnormalParams,\"pageNum\",t)},\"update:limit\":function(t){return a.$set(a.abnormalParams,\"pageSize\",t)},pagination:function(t){a.pageChange(t,\"abnormal\")}}})],1)])],1)],1)},o=[],r=(e(\"d81d\"),e(\"fb6a\"),e(\"4de4\"),e(\"d3b7\"),e(\"ac1f\"),e(\"466d\"),e(\"aaa6\")),i=e(\"d22a\"),l={data:function(){return{abnormalList:[],loading:!1,abnormalParams:{pageNum:1,pageSize:10,total:0,siteName:void 0,abnormalType:void 0,town:void 0,list:[],data:e(\"0067\")},abnormalOptions:[{dictLabel:\"有处理量但低（零）用电量\",dictValue:\"1\",reason:\"现场处理设备未启动或未完全启动、流量采集有问题、提供的户号数据有误、负荷未经过电能表\"},{dictLabel:\"有处理量但高用电量\",dictValue:\"2\",reason:\"现场处理设备异常启动、外部施工借电\"},{dictLabel:\"高处理量但低用电量\",dictValue:\"3\",reason:\"现场处理设备未启动或未完全启动、流量采集有问题、负荷未经过电能表\"},{dictLabel:\"处理量类似但用电量变化大\",dictValue:\"4\",reason:\"现场处理设备未按照流量需求进行启动、自动化控制策略过于激进\"},{dictLabel:\"处理量减少但用电量增加\",dictValue:\"5\",reason:\"现场处理设备未按照流量需求进行启动、自动化控制策略过于激进\"},{dictLabel:\"处理量增加但用电量减少\",dictValue:\"6\",reason:\"现场处理设备未按照流量需求进行启动、自动化控制策略过于激进\"},{dictLabel:\"处理量满负荷或超90%\",dictValue:\"7\",reason:\"需进行扩容改造\"}],townData:e(\"ae21\"),townOptions:[],initTownOptions:[],reason:\"\"}},created:function(){},mounted:function(){this.abnormalParams.town=localStorage.getItem(\"siteName\"),this.getAbnormalList(),this.getTownList()},methods:{getTownList:function(){var a=this;this.justIsStatic()?(this.townOptions=this.townData.map((function(a){var t={town:a.town};return t})),this.initTownOptions=Object.assign(this.townOptions,{})):Object(r[\"k\"])().then((function(t){a.townOptions=t.data,a.initTownOptions=Object.assign(a.townOptions,{})}))},justIsStatic:function(){return JSON.parse(\"true\")},getAbnormalList:function(){var a=this,t=localStorage.getItem(\"pageNum\");t=t?parseInt(t):1,localStorage.setItem(\"pageNum\",\"\"),this.justIsStatic()?this.handleQuery(t):Object(r[\"c\"])().then((function(e){a.abnormalParams.data=e.data,a.handleQuery(t)}))},pageChange:function(a,t){var e=a.page;this.dealData(e,t)},dealData:function(a,t){var e=this[t+\"Params\"].list,n=this[t+\"Params\"].pageSize;this[t+\"List\"]=e.slice((a-1)*n,a*n)},changTown:function(){this.townOptions=this.initTownOptions},handleFilter:function(a){this.townOptions=a?this.initTownOptions.filter((function(t){if(t.town)return-1!=t.town.toUpperCase().indexOf(a.toUpperCase())||i[\"a\"].match(t.town,a)})):this.initTownOptions},abnormalTypeFormat:function(a){return this.selectDictLabel(this.abnormalOptions,a.abnormalType)},handleQuery:function(a){var t=this;this.abnormalParams.pageNum=a||1;var e=this.abnormalParams.data.filter((function(a){return!t.abnormalParams.siteName||(a.siteName.indexOf(t.abnormalParams.siteName)>-1||i[\"a\"].match(a.siteName,t.abnormalParams.siteName))}));e=e.filter((function(a){return!t.abnormalParams.town||a.siteName.indexOf(t.abnormalParams.town)>-1})),this.abnormalParams.list=e.filter((function(a){return!t.abnormalParams.abnormalType||a.abnormalType===t.abnormalParams.abnormalType})),this.abnormalParams.total=this.abnormalParams.list.length,this.dealData(a,\"abnormal\")},resetQuery:function(){this.dateRange=[],this.resetForm(\"queryForm\"),this.handleQuery()},back:function(){this.$router.push({name:\"Index\",params:{back:!0}})},changeAbnormalType:function(){var a=this;if(this.abnormalParams.abnormalType){var t=this.abnormalOptions.filter((function(t){return t.dictValue===a.abnormalParams.abnormalType}));this.reason=t[0].reason}else this.reason=\"\"},gotoXq:function(a){localStorage.setItem(\"custNo\",a.custNo),localStorage.setItem(\"pageNum\",this.abnormalParams.pageNum),localStorage.setItem(\"abnormal\",!0),this.$router.push({path:\"/dlkcw/xq\",query:{custNo:a.custNo}})},exportToExcel:function(){var a=this,t=[\"站点名称\",\"异常类型\",\"数据范围\",\"异常说明\"],e=this.abnormalParams.list.map((function(t){return[t.siteName,a.abnormalTypeFormat(t),t.dataRange,t.msg]}));Object(r[\"a\"])(t,e,\"异常数据列表\",\"异常数据\")}}},s=l,m=(e(\"be15\"),e(\"2877\")),c=Object(m[\"a\"])(s,n,o,!1,null,\"44d1da16\",null);t[\"default\"]=c.exports},be15:function(a,t,e){\"use strict\";e(\"686a\")}}]);","extractedComments":[]}