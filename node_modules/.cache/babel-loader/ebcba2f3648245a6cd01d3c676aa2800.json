{"remainingRequest":"D:\\work\\dlksc\\node_modules\\babel-loader\\lib\\index.js!D:\\work\\dlksc\\node_modules\\@vue\\cli-plugin-eslint\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\work\\dlksc\\src\\plugins\\download.js","dependencies":[{"path":"D:\\work\\dlksc\\src\\plugins\\download.js","mtime":1741570207608},{"path":"D:\\work\\dlksc\\babel.config.js","mtime":1741570206490},{"path":"D:\\work\\dlksc\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1741571479562},{"path":"D:\\work\\dlksc\\node_modules\\babel-loader\\lib\\index.js","mtime":1741571480837},{"path":"D:\\work\\dlksc\\node_modules\\@vue\\cli-plugin-eslint\\node_modules\\eslint-loader\\index.js","mtime":1741571479931}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgc2F2ZUFzIGFzIF9zYXZlQXMgfSBmcm9tICdmaWxlLXNhdmVyJzsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IHsgZ2V0VG9rZW4gfSBmcm9tICdAL3V0aWxzL2F1dGgnOwp2YXIgYmFzZVVSTCA9IHByb2Nlc3MuZW52LlZVRV9BUFBfQkFTRV9BUEk7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiBmdW5jdGlvbiBuYW1lKF9uYW1lKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIHZhciBpc0RlbGV0ZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogdHJ1ZTsKICAgIHZhciB1cmwgPSBiYXNlVVJMICsgIi9jb21tb24vZG93bmxvYWQ/ZmlsZU5hbWU9IiArIGVuY29kZVVSSShfbmFtZSkgKyAiJmRlbGV0ZT0iICsgaXNEZWxldGU7CiAgICBheGlvcyh7CiAgICAgIG1ldGhvZDogJ2dldCcsCiAgICAgIHVybDogdXJsLAogICAgICByZXNwb25zZVR5cGU6ICdibG9iJywKICAgICAgaGVhZGVyczogewogICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgZ2V0VG9rZW4oKQogICAgICB9CiAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgdmFyIGJsb2IgPSBuZXcgQmxvYihbcmVzLmRhdGFdKTsKCiAgICAgIF90aGlzLnNhdmVBcyhibG9iLCBkZWNvZGVVUkkocmVzLmhlYWRlcnNbJ2Rvd25sb2FkLWZpbGVuYW1lJ10pKTsKICAgIH0pOwogIH0sCiAgcmVzb3VyY2U6IGZ1bmN0aW9uIHJlc291cmNlKF9yZXNvdXJjZSkgewogICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgdmFyIHVybCA9IGJhc2VVUkwgKyAiL2NvbW1vbi9kb3dubG9hZC9yZXNvdXJjZT9yZXNvdXJjZT0iICsgZW5jb2RlVVJJKF9yZXNvdXJjZSk7CiAgICBheGlvcyh7CiAgICAgIG1ldGhvZDogJ2dldCcsCiAgICAgIHVybDogdXJsLAogICAgICByZXNwb25zZVR5cGU6ICdibG9iJywKICAgICAgaGVhZGVyczogewogICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgZ2V0VG9rZW4oKQogICAgICB9CiAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgdmFyIGJsb2IgPSBuZXcgQmxvYihbcmVzLmRhdGFdKTsKCiAgICAgIF90aGlzMi5zYXZlQXMoYmxvYiwgZGVjb2RlVVJJKHJlcy5oZWFkZXJzWydkb3dubG9hZC1maWxlbmFtZSddKSk7CiAgICB9KTsKICB9LAogIHppcDogZnVuY3Rpb24gemlwKHVybCwgbmFtZSkgewogICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgdmFyIHVybCA9IGJhc2VVUkwgKyB1cmw7CiAgICBheGlvcyh7CiAgICAgIG1ldGhvZDogJ2dldCcsCiAgICAgIHVybDogdXJsLAogICAgICByZXNwb25zZVR5cGU6ICdibG9iJywKICAgICAgaGVhZGVyczogewogICAgICAgICdBdXRob3JpemF0aW9uJzogJ0JlYXJlciAnICsgZ2V0VG9rZW4oKQogICAgICB9CiAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgdmFyIGJsb2IgPSBuZXcgQmxvYihbcmVzLmRhdGFdLCB7CiAgICAgICAgdHlwZTogJ2FwcGxpY2F0aW9uL3ppcCcKICAgICAgfSk7CgogICAgICBfdGhpczMuc2F2ZUFzKGJsb2IsIG5hbWUpOwogICAgfSk7CiAgfSwKICBzYXZlQXM6IGZ1bmN0aW9uIHNhdmVBcyh0ZXh0LCBuYW1lLCBvcHRzKSB7CiAgICBfc2F2ZUFzKHRleHQsIG5hbWUsIG9wdHMpOwogIH0KfTs="},{"version":3,"sources":["D:/work/dlksc/src/plugins/download.js"],"names":["saveAs","axios","getToken","baseURL","process","env","VUE_APP_BASE_API","name","isDelete","url","encodeURI","method","responseType","headers","then","res","blob","Blob","data","decodeURI","resource","zip","type","text","opts"],"mappings":"AAAA,SAASA,MAAM,IAANA,OAAT,QAAuB,YAAvB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,QAAT,QAAyB,cAAzB;AAEA,IAAMC,OAAO,GAAGC,OAAO,CAACC,GAAR,CAAYC,gBAA5B;AAEA,eAAe;AACbC,EAAAA,IADa,gBACRA,KADQ,EACe;AAAA;;AAAA,QAAjBC,QAAiB,uEAAN,IAAM;AAC1B,QAAIC,GAAG,GAAGN,OAAO,GAAG,4BAAV,GAAyCO,SAAS,CAACH,KAAD,CAAlD,GAA2D,UAA3D,GAAwEC,QAAlF;AACAP,IAAAA,KAAK,CAAC;AACJU,MAAAA,MAAM,EAAE,KADJ;AAEJF,MAAAA,GAAG,EAAEA,GAFD;AAGJG,MAAAA,YAAY,EAAE,MAHV;AAIJC,MAAAA,OAAO,EAAE;AAAE,yBAAiB,YAAYX,QAAQ;AAAvC;AAJL,KAAD,CAAL,CAKGY,IALH,CAKQ,UAAAC,GAAG,EAAI;AACb,UAAMC,IAAI,GAAG,IAAIC,IAAJ,CAAS,CAACF,GAAG,CAACG,IAAL,CAAT,CAAb;;AACA,MAAA,KAAI,CAAClB,MAAL,CAAYgB,IAAZ,EAAkBG,SAAS,CAACJ,GAAG,CAACF,OAAJ,CAAY,mBAAZ,CAAD,CAA3B;AACD,KARD;AASD,GAZY;AAabO,EAAAA,QAba,oBAaJA,SAbI,EAaM;AAAA;;AACjB,QAAIX,GAAG,GAAGN,OAAO,GAAG,qCAAV,GAAkDO,SAAS,CAACU,SAAD,CAArE;AACAnB,IAAAA,KAAK,CAAC;AACJU,MAAAA,MAAM,EAAE,KADJ;AAEJF,MAAAA,GAAG,EAAEA,GAFD;AAGJG,MAAAA,YAAY,EAAE,MAHV;AAIJC,MAAAA,OAAO,EAAE;AAAE,yBAAiB,YAAYX,QAAQ;AAAvC;AAJL,KAAD,CAAL,CAKGY,IALH,CAKQ,UAAAC,GAAG,EAAI;AACb,UAAMC,IAAI,GAAG,IAAIC,IAAJ,CAAS,CAACF,GAAG,CAACG,IAAL,CAAT,CAAb;;AACA,MAAA,MAAI,CAAClB,MAAL,CAAYgB,IAAZ,EAAkBG,SAAS,CAACJ,GAAG,CAACF,OAAJ,CAAY,mBAAZ,CAAD,CAA3B;AACD,KARD;AASD,GAxBY;AAyBbQ,EAAAA,GAzBa,eAyBTZ,GAzBS,EAyBJF,IAzBI,EAyBE;AAAA;;AACb,QAAIE,GAAG,GAAGN,OAAO,GAAGM,GAApB;AACAR,IAAAA,KAAK,CAAC;AACJU,MAAAA,MAAM,EAAE,KADJ;AAEJF,MAAAA,GAAG,EAAEA,GAFD;AAGJG,MAAAA,YAAY,EAAE,MAHV;AAIJC,MAAAA,OAAO,EAAE;AAAE,yBAAiB,YAAYX,QAAQ;AAAvC;AAJL,KAAD,CAAL,CAKGY,IALH,CAKQ,UAAAC,GAAG,EAAI;AACb,UAAMC,IAAI,GAAG,IAAIC,IAAJ,CAAS,CAACF,GAAG,CAACG,IAAL,CAAT,EAAqB;AAAEI,QAAAA,IAAI,EAAE;AAAR,OAArB,CAAb;;AACA,MAAA,MAAI,CAACtB,MAAL,CAAYgB,IAAZ,EAAkBT,IAAlB;AACD,KARD;AASD,GApCY;AAqCbP,EAAAA,MArCa,kBAqCNuB,IArCM,EAqCAhB,IArCA,EAqCMiB,IArCN,EAqCY;AACvBxB,IAAAA,OAAM,CAACuB,IAAD,EAAOhB,IAAP,EAAaiB,IAAb,CAAN;AACD;AAvCY,CAAf","sourcesContent":["import { saveAs } from 'file-saver'\nimport axios from 'axios'\nimport { getToken } from '@/utils/auth'\n\nconst baseURL = process.env.VUE_APP_BASE_API\n\nexport default {\n  name(name, isDelete = true) {\n    var url = baseURL + \"/common/download?fileName=\" + encodeURI(name) + \"&delete=\" + isDelete\n    axios({\n      method: 'get',\n      url: url,\n      responseType: 'blob',\n      headers: { 'Authorization': 'Bearer ' + getToken() }\n    }).then(res => {\n      const blob = new Blob([res.data])\n      this.saveAs(blob, decodeURI(res.headers['download-filename']))\n    })\n  },\n  resource(resource) {\n    var url = baseURL + \"/common/download/resource?resource=\" + encodeURI(resource);\n    axios({\n      method: 'get',\n      url: url,\n      responseType: 'blob',\n      headers: { 'Authorization': 'Bearer ' + getToken() }\n    }).then(res => {\n      const blob = new Blob([res.data])\n      this.saveAs(blob, decodeURI(res.headers['download-filename']))\n    })\n  },\n  zip(url, name) {\n    var url = baseURL + url\n    axios({\n      method: 'get',\n      url: url,\n      responseType: 'blob',\n      headers: { 'Authorization': 'Bearer ' + getToken() }\n    }).then(res => {\n      const blob = new Blob([res.data], { type: 'application/zip' })\n      this.saveAs(blob, name)\n    })\n  },\n  saveAs(text, name, opts) {\n    saveAs(text, name, opts);\n  }\n}\n\n"]}]}